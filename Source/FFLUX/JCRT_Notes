When parallelising using openMP try the "THREADPRIVATE" keyword on each variable: 
I think this somewhat allows for module files to have different mem locations across nodes... Need to read more...
